<html>
<head>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8">
	<title>TETRIS</title>
<script type="text/javascript" charset="utf-8">
	var ctx;
	var shape;
	var oldshape;
	var done=false;
	function draw(){
		var canvas = document.getElementById("tetris");
		if (canvas.getContext){
			ctx = canvas.getContext("2d");
			var tetromino1 = new Shape(1,19,-1,0,1,0,0,-1,"blue");
			drawShape(ctx,tetromino1,tetromino1.color);
			var tetromino2 = new Shape(2,0,1,0,1,1,2,1,"green");
			shape=tetromino2;
			rotate(shape);
			drop(ctx,shape,shape);
			tetromino3=new Shape(5,0,6,0,5,1,6,1,"yellow");
		//	pause(3000);
		//	shape=tetromino3;
		//	drop(ctx,shape,shape);
		}
	}	
	
	function drawBox(ctx,x,y,color){
		ctx.fillStyle = color;
		ctx.fillRect(x*20,y*20,20,20);
	}
	
	function Shape(x,y,rx1,ry1,rx2,ry2,rx3,ry3,color){
		this.x=x;
		this.y=y;
		this.rx1=rx1;
		this.ry1=ry1;
		this.rx2=rx2;
		this.ry2=ry2;
		this.rx3=rx3;
		this.ry3=ry3;
		this.color=color;
		calculate(this);
	}
	
	function calculate(shape){
		shape.ax1=shape.x+shape.rx1;
		shape.ax2=shape.x+shape.rx2;
		shape.ax3=shape.x+shape.rx3;
		shape.ay1=shape.y+shape.ry1;
		shape.ay2=shape.y+shape.ry2;
		shape.ay3=shape.y+shape.ry3;
		shape.minx=Math.min(shape.x,shape.ax1,shape.ax2,shape.ax3);
		shape.maxx=Math.max(shape.x,shape.ax1,shape.ax2,shape.ax3);
		shape.miny=Math.min(shape.y,shape.ay1,shape.ay2,shape.ay3);
		shape.maxy=Math.max(shape.y,shape.ay1,shape.ay2,shape.ay3);
	}
	
	function rotate(shape){
		var copy=new Shape(shape.x,shape.y,shape.rx1,shape.ry1,shape.rx2,shape.ry2,shape.rx3,shape.ry3,"white");
		shape.rx1=-1*copy.ry1;
		shape.ry1=copy.rx1;
		shape.rx2=-1*copy.ry2;
		shape.ry2=copy.rx2;
		shape.rx3=-1*copy.ry3;
		shape.ry3=copy.rx3;
		calculate(shape);
	}
	
	function drawShape(ctx,shape,color){
		ctx.fillStyle = color;
		ctx.fillRect(shape.x*20,shape.y*20,20,20);
		ctx.fillRect(shape.ax1*20,shape.ay1*20,20,20);
		ctx.fillRect(shape.ax2*20,shape.ay2*20,20,20);
		ctx.fillRect(shape.ax3*20,shape.ay3*20,20,20);
	}
	
	function drop(ctx,old,shape){
		if (shape.maxy<=19){
			oldshape=new Shape(shape.x,shape.y,shape.rx1,shape.ry1,shape.rx2,shape.ry2,shape.rx3,shape.ry3,"white");
			drawShape(ctx,old,"white");
			drawShape(ctx,shape,shape.color);
			shape.y=shape.y+1;
			calculate(shape);
			var t = setTimeout("drop(ctx,oldshape,shape);", 100);
		}
		else{
			done=true;
		}
		
	}
	
</script>
<style type="text/css" media="screen">
	h1{font-size:xx-large;
		font-weight:bold;
		font-family:"Trebuchet MS", Helvetica, sans-serif;
		text-align:center;
		font-variant:small-caps;
		color:#00bfff;
		}
	#game{
		border-color:#1e90ff;
		border-style:double;
		width:200px;
		height:400px;
		margin:20px;
		padding:0px;
		float:left;
	}
	#hiscores{
		top-margin:20px;
	}
	table{
		border:solid;
		
	}
	th{font-family:"Trebuchet MS", Helvetica, sans-serif;
		font-size:large;
		text-align:left;
	}
	td.name{
		width:100px;
	}
	td.score{
		width:50px;
		text-align:right;
	}
</style>
<head>
<body id="" onload="draw();">
	<h1>Tetris</h1>
	<div id="game">
		<canvas id="tetris" width="200" height ="400"><canvas></div>
	<div id="hiscores"><table>
		<th>High Scores</th>
		<tr><td class="name">Person1</td>
			<td class="score">1234</td></tr>
		<tr><td class="name">Person2</td>
			<td class="score">1000</td></tr>
		<tr><td class="name">Person3</td>
			<td class="score">965</td></tr>
		<tr><td class="name">Person4</td>
			<td class="score">876</td></tr>
		<tr><td class="name">Person5</td>
			<td class="score">543</td></tr>
		</table>
		</div>
</body>